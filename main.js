!function(){"use strict";class e{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this.submitBtn=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._errorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_isFormValid(){return this._inputElements.every((e=>e.validity.valid))}_toggleButtonState(){this._isFormValid()?(this.submitBtn.classList.remove(this._inactiveButtonClass),this.submitBtn.disabled=!1):(this.submitBtn.classList.add(this._inactiveButtonClass),this.submitBtn.disabled=!0)}enableValidation(){this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}}class t{constructor(e,t,s,i,r){let{name:n,link:a,_id:o,isLiked:l}=e;this.name=n,this.link=a,this._id=o,this.isLiked=l,this._cardTemplate=t,this._handleImageClick=s,this._handleDeleteClick=i,this._handleAddLike=r}_setEventListeners(){this._likeBtn.addEventListener("click",(()=>{this._handleAddLike(this)})),this._cardElement.querySelector("#trash-button").addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this.name,link:this.link})}))}setIsLiked(e){this.isLiked=e,this._renderLikes()}_renderLikes(){this.isLiked?this._likeBtn.classList.add("card__like-button_active"):this._likeBtn.classList.remove("card__like-button_active")}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardTemplate).content.querySelector(".card").cloneNode(!0),this._likeBtn=this._cardElement.querySelector(".card__like-button"),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__description-text"),this._cardTitleEl.textContent=this.name,this._cardImageEl.src=this.link,this._cardImageEl.alt=this.name+"Photo",this._setEventListeners(),this._renderLikes(),this._cardElement}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.classList.remove("modal_opened")}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class i extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitBtn=this._popupElement.querySelector(".modal__save-button"),this._handleFormSubmit=t}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__form-input"),t={};return e.forEach((e=>t[e.name]=e.value)),t}setLoading(e){this._submitBtn.textContent=e?"Saving...":"Save"}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}const r={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__error",errorClass:"modal__form-input_type_error"},n=document.querySelector("#profile-title-input"),a=document.querySelector("#profile-subtitle-input"),o=document.forms["modal-form"],l=document.querySelector("#image-edit-form"),d=document.querySelector("#profile-avatar-image"),c=document.querySelector("#image-edit-form"),h=document.querySelector("#profile-pencil"),u=document.querySelector("#add-card-modal").querySelector("#add-card-form"),_=document.querySelector(".cards__list"),m=document.querySelector("#preview-modal").querySelector(".modal__image"),p=document.querySelector("#profile-edit-button"),v=document.querySelector("#add-card-button"),E=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponce(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then((e=>this._checkResponce(e)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then((e=>this._checkResponce(e)))}updateUserInfo(e){let{name:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._checkResponce(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponce(e)))}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then((e=>this._checkResponce(e)))}setLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>this._checkResponce(e)))}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>this._checkResponce(e)))}changeAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponce(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"250daeea-0b63-48f9-a4b3-e529116433c4","Content-Type":"application/json"}});function f(e){return e.isLiked?E.removeLike(e._id).then((t=>{e.setIsLiked(t.isLiked)})).catch((e=>{alert(`${e} Failed to add/remove like.`)})):E.setLike(e._id).then((t=>{e.setIsLiked(t.isLiked)})).catch((e=>{alert(`${e} Failed to add/remove like.`)}))}function L(e){I.open(),I.setSubmitAction((()=>{I.setDeleteLoading(!0),E.deleteCard(e._id).then((t=>{e.handleDeleteCard(t),I.close()})).catch((e=>{alert(`${e} Failed to delete post.`)})).finally((()=>{I.setDeleteLoading(!1)}))}))}function k(e){C.open(e)}E.getInitialCards().then((e=>{B.setItems(e),B.renderItems()})).catch((e=>{alert(`${e} Failed to get cards.`)})),E.getUserInfo().then((e=>{g.setUserInfo({name:e.name,description:e.about}),g.setUserAvatar(e.avatar)})).catch((e=>{alert(`${e} Failed to get user info.`)})),d.addEventListener("click",(()=>{q.open()})),h.addEventListener("click",(()=>{q.open()})),v.addEventListener("click",(()=>{b.resetValidation(),y.open()})),p.addEventListener("click",(()=>{const{name:e,description:t}=g.getUserInfo();n.value=e,a.value=t,S.open()})),m.addEventListener("click",(()=>{C.open()})),new e(r,l).enableValidation();const b=new e(r,u);b.enableValidation(),new e(r,o).enableValidation();const S=new i("#profile-edit-modal",(function(e){S.setLoading(!0),E.updateUserInfo(e).then((t=>{g.setUserInfo(e),S.close()})).catch((e=>{alert(`${e} Failed to change user info.`)})).finally((()=>{S.setLoading(!1)}))}));S.setEventListeners();const g=new class{constructor(e){let{title:t,subtitle:s,avatar:i}=e;this._title=document.querySelector(t),this._subtitle=document.querySelector(s),this._avatar=document.querySelector(i)}getUserInfo(){return{name:this._title.textContent,description:this._subtitle.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._title.textContent=t,this._subtitle.textContent=s}setUserAvatar(e){this._avatar.src=e}}({title:".profile__title",subtitle:".profile__subtitle",avatar:".profile__image"}),y=new i("#add-card-modal",(function(e){let{title:t,subtitle:s}=e;y.setLoading(!0),E.addCard({name:t,link:s}).then((e=>{B.addItem(e),y.close()})).catch((e=>{alert(`${e} Failed to add card.`)})).finally((()=>{y.setLoading(!1)}))}));y.setEventListeners();const C=new class extends s{constructor(e){super({popupSelector:e}),this._modalImage=document.querySelector(".modal__image"),this._previewCaption=document.querySelector(".modal__caption")}open(e){let{name:t,link:s}=e;this._modalImage.src=s,this._modalImage.alt=t,this._previewCaption.textContent=t,super.open()}}("#preview-modal");C.setEventListeners();const I=new class extends s{constructor(e){super({popupSelector:e}),this._form=this._popupElement.querySelector(".modal__form"),this._deleteSubmitBtn=this._popupElement.querySelector("#confirm-button")}setSubmitAction(e){this._handleSubmit=e}setDeleteLoading(e){this._deleteSubmitBtn.textContent=e?"Deleting...":"Yes"}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}}("#delete-popup");I.setEventListeners();const q=new i("#profile-image-modal",(function(e){q.setLoading(!0),E.changeAvatar(e.link).then((e=>{g.setUserAvatar(e.avatar),q.close()})).catch((e=>{alert(`${e} Failed to change avatar.`)})).finally((()=>{q.setLoading(!1)}))}));q.setEventListeners(),new e(r,c).enableValidation();const B=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=t}setItems(e){this._items=e}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({items:[],renderer:function(e){return new t(e,"#card-template",k,L,f).getView()}},_)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bkwsS0FBS2lMLFVBQVVoQixHQUMvQmpLLEtBQUtrTCxXQUFXRSxRQUFRRCxFQUMxQixHTGdQQSxDQUNFTCxNQUFPLEdBQ1BDLFNBcEZKLFNBQW9CTSxHQVFsQixPQVBhLElBQUk5SSxFQUNmOEksRUFDQSxpQkFDQTNJLEVBQ0FDLEVBQ0FDLEdBRVVlLFNBQ2QsR0E2RUUyQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy1tYWluLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLW1haW4vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtbWFpbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtbWFpbi8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy1tYWluLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMtbWFpbi8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLW1haW4vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLW1haW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLW1haW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy1tYWluLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5zdWJtaXRCdG4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaXNGb3JtVmFsaWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICghdGhpcy5faXNGb3JtVmFsaWQoKSkge1xyXG4gICAgICB0aGlzLnN1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLnN1Ym1pdEJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLnN1Ym1pdEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIC8vIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgLy8gICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcclxuICAgIGNhcmRUZW1wbGF0ZSxcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUFkZExpa2VcclxuICApIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faWQgPSBfaWQ7XHJcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gY2FyZFRlbXBsYXRlO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlQWRkTGlrZSA9IGhhbmRsZUFkZExpa2U7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUFkZExpa2UodGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiN0cmFzaC1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLm5hbWUsIGxpbms6IHRoaXMubGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0SXNMaWtlZChpc0xpa2VkKSB7XHJcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJMaWtlcygpIHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFRlbXBsYXRlKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVzY3JpcHRpb24tdGV4dFwiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5uYW1lICsgXCJQaG90b1wiO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gKGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmcobG9hZGluZykge1xyXG4gICAgaWYgKGxvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG4vLyBWQVJJQUJMRVNcclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1pbnB1dF90eXBlX2Vycm9yXCIsXHJcbn07XHJcblxyXG4vLyBQcm9maWxlIFZhcmlhYmxlc1xyXG5cclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVTdWJ0aXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXN1YnRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibW9kYWwtZm9ybVwiXTtcclxuY29uc3QgZWRpdEltYWdlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBhdmF0YXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hdmF0YXItaW1hZ2VcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0SW1hZ2VGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1lZGl0LWZvcm1cIik7XHJcbmNvbnN0IHBlbmNpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1wZW5jaWxcIik7XHJcblxyXG4vLyBDYXJkIFZhcmlhYmxlc1xyXG5cclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xyXG5jb25zdCBjYXJkc1dyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5cclxuLy8gUHJldmlldyBJbWFnZSBWYXJpYWJsZXNcclxuXHJcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgbW9kYWxJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuXHJcbi8vIEJ1dHRvbnNcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGROZXdDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1idXR0b25cIik7XHJcblxyXG4vLyBBUEknU1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMjUwZGFlZWEtMGI2My00OGY5LWE0YjMtZTUyOTExNjQzM2M0XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgbmV3Q2FyZFNlY3Rpb24uc2V0SXRlbXMoY2FyZHMpO1xyXG4gICAgbmV3Q2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBhbGVydChgJHtlcnJ9IEZhaWxlZCB0byBnZXQgY2FyZHMuYCk7XHJcbiAgfSk7XHJcblxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChpbmZvKSA9PiB7XHJcbiAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBpbmZvLm5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBpbmZvLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckF2YXRhcihpbmZvLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgYWxlcnQoYCR7ZXJyfSBGYWlsZWQgdG8gZ2V0IHVzZXIgaW5mby5gKTtcclxuICB9KTtcclxuXHJcbi8vIEFQSSBGVU5DVElPTlNcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGRhdGEpIHtcclxuICBwcm9maWxlRWRpdEZvcm0uc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVVc2VySW5mbyhkYXRhKVxyXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgICAgIHByb2ZpbGVFZGl0Rm9ybS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGFsZXJ0KGAke2Vycn0gRmFpbGVkIHRvIGNoYW5nZSB1c2VyIGluZm8uYCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlRWRpdEZvcm0uc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZFN1Ym1pdCh7IHRpdGxlOiBuYW1lLCBzdWJ0aXRsZTogbGluayB9KSB7XHJcbiAgYWRkSW1hZ2VGb3JtLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSlcclxuICAgIC50aGVuKChjYXJkKSA9PiB7XHJcbiAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICBuZXdDYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG4gICAgICBhZGRJbWFnZUZvcm0uY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBhbGVydChgJHtlcnJ9IEZhaWxlZCB0byBhZGQgY2FyZC5gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGFkZEltYWdlRm9ybS5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoaW5wdXQpIHtcclxuICBhdmF0YXJFZGl0Rm9ybS5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmNoYW5nZUF2YXRhcihpbnB1dC5saW5rKVxyXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckF2YXRhcihyZXN1bHQuYXZhdGFyKTtcclxuICAgICAgYXZhdGFyRWRpdEZvcm0uY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBhbGVydChgJHtlcnJ9IEZhaWxlZCB0byBjaGFuZ2UgYXZhdGFyLmApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYXZhdGFyRWRpdEZvcm0uc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkTGlrZShjYXJkKSB7XHJcbiAgaWYgKGNhcmQuaXNMaWtlZCkge1xyXG4gICAgcmV0dXJuIGFwaVxyXG4gICAgICAucmVtb3ZlTGlrZShjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNhcmQuc2V0SXNMaWtlZChyZXMuaXNMaWtlZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgYWxlcnQoYCR7ZXJyfSBGYWlsZWQgdG8gYWRkL3JlbW92ZSBsaWtlLmApO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGFwaVxyXG4gICAgICAuc2V0TGlrZShjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNhcmQuc2V0SXNMaWtlZChyZXMuaXNMaWtlZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgYWxlcnQoYCR7ZXJyfSBGYWlsZWQgdG8gYWRkL3JlbW92ZSBsaWtlLmApO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpIHtcclxuICBjb25maXJtRGVsZXRlUG9wdXAub3BlbigpO1xyXG4gIGNvbmZpcm1EZWxldGVQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgY29uZmlybURlbGV0ZVBvcHVwLnNldERlbGV0ZUxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZUNhcmQocmVzdWx0KTtcclxuICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBhbGVydChgJHtlcnJ9IEZhaWxlZCB0byBkZWxldGUgcG9zdC5gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5zZXREZWxldGVMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuLy8gRlVOQ1RJT05TXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmQpIHtcclxuICBwcmV2aWV3SW1hZ2VQb3B1cC5vcGVuKGNhcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZERhdGEsXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbiAgICBoYW5kbGVBZGRMaWtlXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbi8vIEVWRU5UIExJU1RFTkVSU1xyXG5cclxuYXZhdGFySW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhdmF0YXJFZGl0Rm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxucGVuY2lsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyRWRpdEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZE5ld0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRJbWFnZUZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gcHJvZmlsZVVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIHByb2ZpbGVTdWJ0aXRsZUlucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XHJcbiAgcHJvZmlsZUVkaXRGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5tb2RhbEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJldmlld0ltYWdlUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vQ0xBU1NFU1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRJbWFnZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZWRpdEltYWdlRm9ybSk7XHJcbnByb2ZpbGVFZGl0SW1hZ2UuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtKTtcclxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRm9ybSk7XHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5wcm9maWxlRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdGl0bGU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgc3VidGl0bGU6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXHJcbiAgYXZhdGFyOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGFkZEltYWdlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZC1jYXJkLW1vZGFsXCIsIGhhbmRsZUNhcmRTdWJtaXQpO1xyXG5hZGRJbWFnZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctbW9kYWxcIik7XHJcbnByZXZpZXdJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBDb25maXJtKFwiI2RlbGV0ZS1wb3B1cFwiKTtcclxuY29uZmlybURlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhdmF0YXJFZGl0Rm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtaW1hZ2UtbW9kYWxcIixcclxuICBoYW5kbGVBdmF0YXJTdWJtaXRcclxuKTtcclxuYXZhdGFyRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGF2YXRhckVkaXRGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbmZpZyxcclxuICBwcm9maWxlRWRpdEltYWdlRm9ybVxyXG4pO1xyXG5hdmF0YXJFZGl0Rm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgbmV3Q2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogW10sXHJcbiAgICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcclxuICB9LFxyXG4gIGNhcmRzV3JhcFxyXG4pO1xyXG5cclxuLyogVG8tRG8gTGlzdDpcclxuLSBGSVggQ09SUkVDVElPTlMgJiBTVUJNSVQgKi9cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbmNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbmNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25jZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25jZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbmNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25jZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHNldExpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbmNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uY2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VBdmF0YXIodXJsKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogdXJsLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25jZShyZXMpKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdGl0bGUsIHN1YnRpdGxlLCBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlKTtcclxuICAgIHRoaXMuX3N1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdWJ0aXRsZSk7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3RpdGxlLnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fc3VidGl0bGUudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9zdWJ0aXRsZS50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX21vZGFsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3ByZXZpZXdDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlU3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oaGFuZGxlcikge1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlcjtcclxuICB9XHJcblxyXG4gIHNldERlbGV0ZUxvYWRpbmcobG9hZGluZykge1xyXG4gICAgaWYgKGxvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fZGVsZXRlU3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZGVsZXRlU3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJZZXNcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBjc3NTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIHNldEl0ZW1zKGl0ZW1zKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChkYXRhKSA9PiB7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShkYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtKGRhdGEpIHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihkYXRhKTtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZm9ybSIsInRoaXMiLCJfZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9pbnB1dEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInN1Ym1pdEJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2lzRm9ybVZhbGlkIiwiZXZlcnkiLCJkaXNhYmxlZCIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iLCJDYXJkIiwiX3JlZiIsImNhcmRUZW1wbGF0ZSIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUFkZExpa2UiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJfY2FyZFRlbXBsYXRlIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlQWRkTGlrZSIsIl9saWtlQnRuIiwiX2NhcmRFbGVtZW50IiwiX2NhcmRJbWFnZUVsIiwic2V0SXNMaWtlZCIsIl9yZW5kZXJMaWtlcyIsImhhbmRsZURlbGV0ZUNhcmQiLCJnZXRWaWV3IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsIiwic3JjIiwiYWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfc3VibWl0QnRuIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldExvYWRpbmciLCJsb2FkaW5nIiwicHJldmVudERlZmF1bHQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVTdWJ0aXRsZUlucHV0IiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsImVkaXRJbWFnZUZvcm0iLCJhdmF0YXJJbWFnZSIsInByb2ZpbGVFZGl0SW1hZ2VGb3JtIiwicGVuY2lsIiwiYWRkQ2FyZEZvcm0iLCJjYXJkc1dyYXAiLCJtb2RhbEltYWdlIiwicHJvZmlsZUVkaXRCdG4iLCJhZGROZXdDYXJkQnRuIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uY2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiZ2V0VXNlckluZm8iLCJ1cGRhdGVVc2VySW5mbyIsIl9yZWYyIiwiZGVzY3JpcHRpb24iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiZGVsZXRlQ2FyZCIsImFkZENhcmQiLCJfcmVmMyIsInNldExpa2UiLCJyZW1vdmVMaWtlIiwiY2hhbmdlQXZhdGFyIiwidXJsIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImNhcmQiLCJjYXRjaCIsImVyciIsImFsZXJ0IiwiY29uZmlybURlbGV0ZVBvcHVwIiwic2V0U3VibWl0QWN0aW9uIiwic2V0RGVsZXRlTG9hZGluZyIsInJlc3VsdCIsImZpbmFsbHkiLCJwcmV2aWV3SW1hZ2VQb3B1cCIsImNhcmRzIiwibmV3Q2FyZFNlY3Rpb24iLCJzZXRJdGVtcyIsInJlbmRlckl0ZW1zIiwiaW5mbyIsInByb2ZpbGVVc2VySW5mbyIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImF2YXRhckVkaXRGb3JtIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJhZGRJbWFnZUZvcm0iLCJwcm9maWxlRWRpdEZvcm0iLCJkYXRhIiwidGl0bGUiLCJzdWJ0aXRsZSIsIl90aXRsZSIsIl9zdWJ0aXRsZSIsIl9hdmF0YXIiLCJhZGRJdGVtIiwiX21vZGFsSW1hZ2UiLCJfcHJldmlld0NhcHRpb24iLCJfZGVsZXRlU3VibWl0QnRuIiwiaGFuZGxlciIsIl9oYW5kbGVTdWJtaXQiLCJjc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=